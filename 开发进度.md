# 开发进度

## 1. 项目初始化与配置
- [x] 修正 `pyproject.toml` Python 版本为 3.10.0，添加 web 框架和数据库依赖
- [x] 创建项目基础目录结构 (`src/app`)
- [x] 实现配置管理模块 (`src/app/config.py`)，支持环境变量加载

## 2. 核心功能开发
- [x] 实现数据库连接模块，连接 PostgreSQL (`src/app/db.py`)
- [x] 实现代理池获取与检测逻辑 (`src/app/proxy.py`)
  - [x] 从 pgsql 获取代理
  - [x] 验证代理可用性
- [x] 实现企业微信服务模块 (`src/app/wechat.py`)
  - [x] 获取 Access Token (带缓存)
  - [x] 发送消息逻辑 (含重试与代理切换机制)

## 3. API 接口开发
- [x] 定义 Pydantic 数据模型 (`src/app/schemas.py`)
- [x] 实现 API 路由与主程序 (`src/app/main.py`)

## 4. 容器化与部署
- [x] 编写 `Dockerfile`
- [x] 编写 `docker-compose.yml` (含 PostgreSQL 配置)

## 5. 文档与交付
- [x] 编写测试说明 (包含在 README 中)
- [x] 更新 `README.md`
- [x] 将项目请求库从 `httpx` 迁移到 `requests`
- [x] 更新 Docker 配置: 使用 uv, 移除内置库, 映射端口 19007
- [x] Docker 配置时区为东八区
- [x] 创建 `.env` 文件并添加配置参数
- [x] 重新设计 send_message: 优先使用缓存代理, 失败则全量重试并更新缓存
- [x] 重构请求日志: 添加全局包装器, 打印接口地址、入参、返回和耗时

